"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[431],{13431:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var n=r(82937),a=r(42669),s=r(26862),o=r(75958),u=r(10054),i=r(40737),c=r(46417),l=function(e){var t=e.color,r=e.title,s=e.count,l=e.symbol,m=e.percentage,d=e.isLoss;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.ZP,{container:!0,alignItems:"center",children:[(0,c.jsx)(n.ZP,{item:!0,children:(0,c.jsxs)(a.Z,{variant:"h5",children:[l&&"CURRENCY"===l&&"$",s,l&&"PERCENTAGE"===l&&"%"]})}),m&&(0,c.jsx)(n.ZP,{item:!0,children:(0,c.jsx)(o.Z,{variant:"combined",color:t,style:{backgroundColor:"transparent",color:"#000",fontSize:"0.75rem"},icon:(0,c.jsxs)(c.Fragment,{children:[!d&&(0,c.jsx)(u.Z,{style:{fontSize:"0.5rem",color:"inherit"}}),d&&(0,c.jsx)(i.Z,{style:{fontSize:"0.5rem",color:"inherit"}})]}),label:"".concat(m,"%"),sx:{ml:.5,pl:.5},size:"small"})})]}),(0,c.jsx)(a.Z,{variant:"h6",color:"textSecondary",style:{fontSize:"0.75rem"},children:r})]})};l.defaultProps={color:"primary"};var m=l,d=r(5845),v=r.n(d),g=r(97548),p=r.n(g),h=r(42982),x=r(1413),f=r(70885),y=r(47313),w=r(74165),D=r(15861),C=r(13997),R=r.n(C),Z=function(){var e=(0,D.Z)((0,w.Z)().mark((function e(t,r){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R().parse(t,{header:!0,download:!0,skipEmptyLines:!0,complete:r});case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b=r(70816),P=r.n(b),j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],O=function(e){var t=parseInt(e),r=Math.floor((""+t).length/3),n=parseFloat((0!==r?e/Math.pow(1e3,r):t).toPrecision(2));return console.log(n),n%1!==0&&(n=n.toFixed(1)),console.log("type",Number.isInteger(e)),Number.isInteger(e)?n+["","k","M","G","T","P","E"][r]:e.toFixed(2)};var _=function(){var e,t=function(){var e=(0,y.useState)([]),t=(0,f.Z)(e,2),r=t[0],n=t[1],a=(0,y.useState)({totalRevenue:0,generalTotalOrders:0,newCustomers:0,percentageNewCustomersRevenue:0}),s=(0,f.Z)(a,2),o=s[0],u=s[1],i=(0,y.useState)({avgRevenueDay:0,avgOrdersDay:0,avgItemsPerOrder:0,avgOrderValue:0,avgNewCustomersPerDay:0}),c=(0,f.Z)(i,2),l=c[0],m=c[1],d=(0,y.useState)({existingCustomerRevenue:[],newCustomerRevenue:[],totalOrders:[],newCustomerOrders:[]}),v=(0,f.Z)(d,2),g=v[0],p=v[1],w=(0,y.useState)({totalRevenueBySource:[],revenueBySourcePercentage:[[],["","",[]]]}),D=(0,f.Z)(w,2),C=D[0],R=D[1],b=o.totalRevenue,_=o.generalTotalOrders,S=o.newCustomers,N=o.percentageNewCustomersRevenue,F=l.avgRevenueDay,I=l.avgOrdersDay,A=l.avgItemsPerOrder,E=l.avgOrderValue,M=l.avgNewCustomersPerDay,T=g.existingCustomerRevenue,k=g.newCustomerRevenue,B=g.totalOrders,Y=g.newCustomerOrders,V=C.totalRevenueBySource,z=C.revenueBySourcePercentage;(0,y.useEffect)((function(){Z("/free/revenue-by-date.csv",G)}),[]),(0,y.useEffect)((function(){var e=(0,h.Z)(new Set(r.map((function(e){return e.order_date})))),t=(0,h.Z)(new Set(r.map((function(e){return e.order_revenue_source}))));U(),$(e),J(t)}),[r]);var G=function(e){var t=e.data.map((function(e){var t=P()(e.order_date,["M/D/YY","DD/MM/YYYY"]).valueOf();return(0,x.Z)((0,x.Z)({},e),{},{order_date:t})}));t=t.sort((function(e,t){return e.order_date-t.order_date})),t=L(t),n(t)},L=function(e){var t=e[e.length-1].order_date,r=new Date(t);return r.setDate(r.getDate()-30),e.filter((function(e){return new Date(e.order_date)>r}))},U=function(){for(var e=0,t=0,n=0,a=0,s=0,i=0,c=0;c<r.length;c++){var d=r[c];e+=Math.floor(d.order_revenue),t+=parseInt(d.num_orders),s+=parseInt(d.item_quantity),i+=parseInt(d.item_quantity),"New"===d.customer_type&&(n+=1,a+=parseFloat(d.order_revenue))}var v=parseInt(e/30),g=parseInt(t/30);s/=r.length;var p=e/i,h=parseInt(n/30);u((0,x.Z)((0,x.Z)({},o),{},{totalRevenue:O(e),generalTotalOrders:O(t),newCustomers:O(n),percentageNewCustomersRevenue:O(parseFloat(a/e*100))})),m((0,x.Z)((0,x.Z)({},l),{},{avgRevenueDay:O(v),avgOrdersDay:g,avgItemsPerOrder:O(s),avgOrderValue:O(p),avgNewCustomersPerDay:h}))},$=function(e){for(var t=r,n=[],a=[],s=[],o=[],u=[],i=0;i<e.length;i++){for(var c=0,l=0,m=0,d=0,v=0;v<t.length;v++)if(!u.includes(v)){var h=t[v];e[i]===h.order_date&&("Existing"===h.customer_type&&(l+=parseFloat(h.order_revenue)),"New"===h.customer_type&&(c+=parseFloat(h.order_revenue),d+=parseFloat(h.num_orders)),m+=parseFloat(h.num_orders),u.push(v))}n.push([e[i],parseInt(c)]),a.push([e[i],parseInt(l)]),s.push([e[i],parseInt(m)]),o.push([e[i],parseInt(d)])}p((0,x.Z)((0,x.Z)({},g),{},{existingCustomerRevenue:a,newCustomerRevenue:n,totalOrders:s,newCustomerOrders:o}))},J=function(e){var t=new Date,n=[Date.now(),t.setDate(t.getDate()-7),t.setDate(t.getDate()-7),t.setDate(t.getDate()-7),t.setDate(t.getDate()-7)].reverse();0!=r.length&&(t=new Date(r[r.length-1].order_date),n=[r[r.length-1].order_date,t.setDate(t.getDate()-7),t.setDate(t.getDate()-7),t.setDate(t.getDate()-7),t.setDate(t.getDate()-7)].reverse());for(var a=[],s=[],o=[],u=0;u<e.length;u++){for(var i=0,c=0,l=[0,0,0,0,0],m=e[u],d=0;d<r.length;d++)if(!o.includes(d)){var v=r[d];if(m===v.order_revenue_source){i+=parseFloat(v.order_revenue),o.push(d);var g=0;new Date(v.order_date)<=new Date(n[c])?(g=l[c]+parseInt(v.order_revenue),l[c]=g):(g=l[c+1]+parseInt(v.order_revenue),l[c+1]=g,c+=1)}}s.push([m,l]),a.push([m,parseInt(i)])}console.log(n.map((function(e){return"".concat(j[new Date(e).getMonth()]," ").concat(new Date(e).getDate())}))),console.log([n.map((function(e){return"".concat(j[new Date(e).getMonth()]," ").concat(new Date(e).getDate())})),s.sort((function(e,t){return e[1].reduce((function(e,t){return e+t}))-t[1].reduce((function(e,t){return e+t}))}))],"arr"),R((0,x.Z)((0,x.Z)({},C),{},{totalRevenueBySource:a.sort((function(e,t){return t[1]-e[1]})),revenueBySourcePercentage:[n.map((function(e){return"".concat(j[new Date(e).getMonth()]," ").concat(new Date(e).getDate())})),s.sort((function(e,t){return e[1].reduce((function(e,t){return e+t}))-t[1].reduce((function(e,t){return e+t}))}))]}))};return{states:{totalRevenue:b,generalTotalOrders:_,newCustomers:S,percentageNewCustomersRevenue:N,avgRevenueDay:F,avgOrdersDay:I,avgItemsPerOrder:A,avgOrderValue:E,avgNewCustomersPerDay:M,existingCustomerRevenue:T,newCustomerRevenue:k,totalOrders:B,newCustomerOrders:Y,totalRevenueBySource:V,revenueBySourcePercentage:z}}}(),r=t.states,o=r.totalRevenue,u=r.generalTotalOrders,i=r.newCustomers,l=r.percentageNewCustomersRevenue,d=r.avgRevenueDay,g=r.avgOrdersDay,w=r.avgItemsPerOrder,D=r.avgOrderValue,C=r.avgNewCustomersPerDay,R=r.existingCustomerRevenue,b=r.newCustomerRevenue,_=r.totalOrders,S=r.newCustomerOrders,N=r.totalRevenueBySource,F=r.revenueBySourcePercentage,I={chart:{type:"column"},title:{text:"Revenue by Date"},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e %b"}},yAxis:[{title:{text:"Existing Customer Revenue"},stackLabels:{enabled:!0,formatter:function(){return"$"+v().numberFormat(this.total,0,",",".")}}},{labels:{formatter:function(){var e=this.value,t=parseFloat(e/1e3);return"".concat(t,"K")}},title:{text:"Total Orders"},opposite:!0,max:2500}],tooltip:{formatter:function(){return'<span style="color:'.concat(this.color,'">\u25cf</span> ').concat(this.series.name,": <b>$").concat(v().numberFormat(this.y,0,",","."),'</b><br/><span style="color:').concat(this.color,'">\u25cf</span> Date: <b>').concat(new Date(this.x).getDate()+"/"+(new Date(this.x).getMonth()+1),"</b><br/>")}},plotOptions:{column:{stacking:"normal"},spline:{marker:{enabled:!1}}},series:[{name:"Existing Customer Revenue",data:(e={existingCustomerRevenue:R,newCustomerRevenue:b,totalOrders:_,newCustomerOrders:S}).existingCustomerRevenue,yAxis:0},{name:"New Customer Revenue",data:e.newCustomerRevenue,yAxis:0},{type:"spline",name:"Total Orders",data:e.totalOrders,yAxis:1},{type:"spline",name:"New Customer Orders",data:e.newCustomerOrders,yAxis:1}]},A=function(e){var t=e.revenueBySourcePercentage;return{chart:{type:"column"},title:{text:"Revenue by Source"},xAxis:{categories:t[0]},yAxis:{min:0,title:{text:"Percentage"},labels:{formatter:function(){var e=this.value,t=Math.floor((""+e).length/3),r=parseFloat((0!==t?e/Math.pow(1e3,t):e).toPrecision(2));return r%1!==0&&(r=r.toFixed(1)),r+["","k","M","G","T","P","E"][t]}}},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',shared:!0},plotOptions:{column:{stacking:"percent"}},series:(0,h.Z)(t[1].map((function(e){return{name:e[0],data:e[1]}})))}}({revenueBySourcePercentage:F}),E=function(e){var t=e.totalRevenueBySource;return{chart:{type:"column",inverted:!0},title:{text:"Revenue by Source"},xAxis:{categories:t.map((function(e){return e[0]}))},yAxis:{labels:{formatter:function(){var e=this.value,t=Math.floor((""+e).length/3),r=parseFloat((0!==t?e/Math.pow(1e3,t):e).toPrecision(2));return r%1!==0&&(r=r.toFixed(1)),r+["","k","M","G","T","P","E"][t]}}},tooltip:{formatter:function(){return'<span style="color:'.concat(this.color,'">\u25cf</span> ').concat(this.series.name,": <b>$").concat(v().numberFormat(this.y,0,",","."),"</b><br/>")}},series:[{name:"Revenue by Source",data:t.map((function(e){return e[1]})),dataLabels:{enabled:!1}}]}}({totalRevenueBySource:N});return(0,c.jsxs)(n.ZP,{container:!0,rowSpacing:4.5,columnSpacing:1,children:[(0,c.jsx)(n.ZP,{item:!0,xs:12,sx:{mb:2.25},children:(0,c.jsx)(a.Z,{variant:"h5",children:"Dashboard"})}),(0,c.jsxs)(n.ZP,{container:!0,xs:12,md:12,lg:12,justifyContent:"space-around",children:[(0,c.jsx)(s.Z,{children:(0,c.jsxs)(n.ZP,{container:!0,justifyContent:"space-between",children:[(0,c.jsx)(n.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,c.jsx)(m,{title:"Total Revenue",count:o,symbol:"CURRENCY",percentage:31})}),(0,c.jsx)(n.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,c.jsx)(m,{title:"Total Orders",count:u,percentage:28})}),(0,c.jsx)(n.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,c.jsx)(m,{title:"New Customers",count:i,percentage:27})}),(0,c.jsx)(n.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,c.jsx)(m,{title:"% New Customers Revenue",count:l,symbol:"PERCENTAGE",percentage:3})})]})}),(0,c.jsx)(s.Z,{children:(0,c.jsxs)(n.ZP,{container:!0,justifyContent:"space-between",children:[(0,c.jsx)(n.ZP,{item:!0,xs:12,sm:6,md:6,lg:2.4,children:(0,c.jsx)(m,{title:"Avg Revenue/Day",count:d,symbol:"CURRENCY",percentage:31})}),(0,c.jsx)(n.ZP,{item:!0,xs:12,sm:6,md:6,lg:2.4,children:(0,c.jsx)(m,{title:"Avg Orders/Day",count:g,percentage:28})}),(0,c.jsx)(n.ZP,{item:!0,xs:12,sm:6,md:6,lg:2.4,children:(0,c.jsx)(m,{title:"Avg Items/Order",count:w,percentage:8})}),(0,c.jsx)(n.ZP,{item:!0,xs:12,sm:6,md:6,lg:2.4,children:(0,c.jsx)(m,{title:"Avg Order Value",count:D,symbol:"CURRENCY",percentage:3})}),(0,c.jsx)(n.ZP,{item:!0,xs:12,sm:6,md:6,lg:2.4,children:(0,c.jsx)(m,{title:"Avg New Customers/Day",count:C,percentage:27})})]})})]}),(0,c.jsx)(n.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,c.jsx)(p(),{highcharts:v(),options:I})}),(0,c.jsx)(n.ZP,{item:!0,xs:12,md:6,lg:6,children:(0,c.jsx)(p(),{highcharts:v(),options:A})}),(0,c.jsx)(n.ZP,{item:!0,xs:12,md:6,lg:6,children:(0,c.jsx)(p(),{highcharts:v(),options:E})})]})}}}]);